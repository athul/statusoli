name: Build
on:
  push:
  pull_request:
    types: [opened,closed]
  issues:
    types: [opened, closed, reopened]
  issue_comment:
    types: [created]
  watch:
    types: [started]
jobs:

  build:
    name: Build
    runs-on: ubuntu-latest
    steps:

    - name: Set up Go 1.13
      uses: actions/setup-go@v1
      with:
        go-version: 1.13
      id: go

    - name: Check out code into the Go module directory
      uses: actions/checkout@v1

    - name: Build
      run: go build -v .
      
    - name: Statusoli
      uses: athul/statusoli@better
      env:
        STARGAZERS: ${{ github.event.repository.stargazers_count }}
        FORKERS: ${{ github.event.repository.forks_count }}
        IU_TITLE: ${{ github.event.issue.title }}
        IU_NUM: ${{ github.event.issue.number }}
        IU_ACTOR: ${{ github.event.issue.user.login }}
        IU_BODY: ${{ github.event.issue.body }}
        IU_COM: ${{github.event.comment.body}}
        PR_STATE: ${{ github.event.action }}
        PR_NUM: ${{ github.event.number }}
        PR_TITLE: ${{ github.event.pull_request.title }}
        PR_BODY: ${{ github.event.pull_request.body }}
      if: always()
      with:
        chat: ${{ secrets.chat }}
        token: ${{ secrets.token }}
        status: ${{ job.status }}
